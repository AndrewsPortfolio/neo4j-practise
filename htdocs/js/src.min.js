function logDebug(e,t){showDebug&&console.log(e+" : "+t)}function extractSingleDataVue(e){return arr=[],e.forEach(function(e){arr.push(e._fields[0].properties)}),arr}function extractEmployee(e){return arr=[],e.forEach(function(e){var t={};"Employee"==e._fields[0].label&&(t=e._fields[0].properties),"Department"==e._fields[1].labels&&(t.department=e._fields[1].properties),"Employee"==e._fields[2].label&&(t.manager=e._fields[2].properties),arr.push(t)}),arr}function errorCheck(e){switch(e){case e.success:return!0;case e.dbError:case e.inputError:return!1;default:return!0}}function createUrl(e){return server.protocol+server.ip+":"+server.port+"/"+e}function formToArray(e){var t={};for(var r of e.entries())t[r[0]]=r[1];return t}function searchData(e,t,r){for(var a=0;a<r.length;a++)if(r[a][t]===e)return r[a]}var departments,employees,showDebug=!0,codes={success:1,dbError:2,inputError:3,unknown:4},server={protocol:"http://",ip:"127.0.0.1",port:"1337"},app=new Vue({el:"#e_controller",data:{test:"this is a test",departments:[],employees:[],assignDep:{employee:{first_name:"",surename:"",email:"",job_title:""},department:{name:"",description:""}}},created:function(){this.getDepartments(),this.getEmployees()},methods:{getDepartments:function(){this.$http.get(createUrl("departments")).then(e=>{errorCheck(e)?this.departments=extractSingleDataVue(e.body):console.log("data error : "+e)},e=>{}).bind(this)},getEmployees:function(){this.$http.get(createUrl("Employees")).then(e=>{console.log(e.body),console.log(extractEmployee(e.body)),errorCheck(e)||console.log("data error : "+e)},e=>{}).bind(this)},addDepartment:function(e){var t={name:e.target.elements.name.value,description:e.target.elements.description.value};this.$http.post(createUrl("addDepartment"),t).then(r=>{errorCheck(r)?(this.departments.push(t),e.target.reset()):console.log("data error : "+r)},e=>{}).bind(this)},addEmployee:function(e){var t={first_name:e.target.elements.first_name.value,surename:e.target.elements.surename.value,email:e.target.elements.email.value,job_title:e.target.elements.job_title.value,department:searchData(e.target.elements.department.value,"name",this.departments)};this.$http.post(createUrl("addEmployee"),t).then(e=>{errorCheck(e)?this.employees.push(t):console.log("data error : "+e)},e=>{}).bind(this)}}});