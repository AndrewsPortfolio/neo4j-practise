function logDebug(e,t){showDebug&&console.log(e+" : "+t)}function extractSingleDataVue(e){return arr=[],e.forEach(function(e){arr.push(e._fields[0].properties)}),arr}function extractData(e,t=null){var r=[];return e.forEach(function(e,n){var o={};if(null!=e._fields[0]&&(o=e._fields[0].properties),null!=t)for(var a=1;a<t.length;a++)null!=e._fields[a]&&(o[t[a]]=e._fields[a].properties);r.push(o)}),r}function errorCheck(e){switch(e){case e.success:return!0;case e.dbError:case e.inputError:return!1;default:return!0}}function createUrl(e){return server.protocol+server.ip+":"+server.port+"/"+e}function popModel(e,t){var r={};return e.forEach(function(e){r[e]=parameters[e]}),r}function formToObj(e,t){var r={};return t.forEach(function(t){r[t]=e[t].value}),r}function searchData(e,t,r){for(var n=0;n<r.length;n++)if(r[n][t]===e)return r[n]}function checkVar(e){return void 0===e}var departments,employees,showDebug=!0,codes={success:1,dbError:2,inputError:3,unknown:4},server={protocol:"http://",ip:"127.0.0.1",port:"1337"};Vue.mixin({data:function(){return{get employeeModel(){return["first_name","surename","email","job_title"]},get empExtras(){return["department","manager"]},get departmentModel(){return["name","description"]},get depExtras(){return["count"]}}}});var app=new Vue({el:"#e_controller",data:{test:"this is a test",departments:[],employees:[],assignDep:{employee:{first_name:"",surename:"",email:"",job_title:""},department:{name:"",description:""}}},created:function(){this.getDepartments(),this.getEmployees()},methods:{getDepartments:function(){this.$http.get(createUrl("departments")).then(e=>{errorCheck(e)?(console.log(e.body),this.departments=extractData(e.body,null),console.log(this.departments)):console.log("data error : "+e)},e=>{}).bind(this)},getEmployees:function(){this.$http.get(createUrl("Employees")).then(e=>{errorCheck(e)?this.employees=extractData(e.body,this.empExtras):console.log("data error : "+e)},e=>{}).bind(this)},addDepartment:function(e){var t={name:e.target.elements.name.value,description:e.target.elements.description.value};this.$http.post(createUrl("addDepartment"),t).then(r=>{errorCheck(r)?(this.departments.push(t),e.target.reset()):console.log("data error : "+r)},e=>{}).bind(this)},addEmployee:function(e){var t=formToObj(e.target.elements,this.employeeModel);t.department=searchData(e.target.elements.department.value,"name",this.departments),this.$http.post(createUrl("addEmployee"),t).then(r=>{errorCheck(r)?(this.employees.push(t),e.target.reset()):console.log("data error : "+r)},e=>{}).bind(this)}}});